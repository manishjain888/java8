<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<beans>


  <!--bean id="AutoFundMessageGenerator"  class="com.rbs.rbsgbl.loaniq.funding.process.messagesender.AutoFundMessageGenerator"  init-method="processFlow" destroy-method="doFinalize">
    <property name="autoFundMessageBS"><ref bean="AutoFundMessageBS"/></property>
    <property name="argonClientHandler"><ref bean="ArgonClientHandler"/></property>
  </bean-->    

  <bean id="AutoFundMessageBS" class="org.springframework.aop.framework.ProxyFactoryBean">
		<property name="target">
			<ref bean="AutoFundMessageBSImpl"/>
		</property>
		<property name="proxyInterfaces">
	    	<value>com.rbs.rbsgbl.loaniq.funding.datastore.AutoFundMessageBS</value>
	 	</property>
	</bean>
			
	<bean id="AutoFundMessageBSImpl" class="com.rbs.rbsgbl.loaniq.funding.datastore.AutoFundMessageBSImpl">
		<property name="autoFundingMessageDAO">
			<ref bean="AutoFundingMessageDAO"/>
		</property>
		<property name="autoFundMessage">
			<ref bean="AutoFundMessage"/>
		</property>
	</bean>
	
	<bean id="AutoFundMessage" class="com.rbs.rbsgbl.loaniq.funding.process.AutoFundMessage">
		<property name="strXSDFileName" value="${e_autoFundingArgonMessageXSD}" />
		<property name="validateXML">
			<ref bean="ValidateXML"/>
		</property>	
	</bean>

	<bean id="ValidateXML" class="com.rbs.rbsgbl.loaniq.generic.common.ValidateXML">		
	</bean>
	
	<!--@TODO to make different bean for the implementation class-->
	<bean id="AutoFundingMessageDAO" class="com.rbs.rbsgbl.loaniq.funding.datastore.AutoFundingMessageDAOImpl">
		<property name="sqlMapClient" ref="sqlMapClient"/>
		<property name="dataSource" ref="oracleDataSource"/>		
	</bean>	
		
  <!--OutBound-->
  <bean id="ArgonSendHandler" class="com.rbs.rbsgbl.loaniq.funding.process.messagesender.ArgonSendHandler">      
    <property name="checkForDuplicates"><value>true</value></property>  
    <property name="messagePersistenceHandler"><ref bean="AutoFundMessageBS"/></property>
	<property name="argonClient"><bean class="com.rbsfm.argon.client.cga.Client"/></property>
	<property name="messageType"><value>wssmmtrade</value></property>
	<property name="messageVersion"><value>3</value></property>
  </bean>   

  <bean id="ArgonClientHandler" class="com.rbs.rbsgbl.loaniq.funding.process.messagesender.ArgonClientHandler">
		<property name="argonSendHandler"><ref bean ="ArgonSendHandler"/></property>  
		<property name="argonClient"><bean class="com.rbsfm.argon.client.cga.Client"/></property>
		<property name="clientNodeAddress">
			  <bean class="com.rbsfm.argon.client.cga.ClientNodeAddress">
				  <constructor-arg index="0"><value>ln:dev:loaniq:funding</value></constructor-arg>
			  </bean>
		</property>   
  </bean>    
  
</beans>